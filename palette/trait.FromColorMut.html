<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Temporarily convert colors in place."><meta name="keywords" content="rust, rustlang, rust-lang, FromColorMut"><title>FromColorMut in palette - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../palette/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Trait FromColorMut</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.from_color_mut">from_color_mut</a></div><h3 class="sidebar-title"><a href="#foreign-impls">Implementations on Foreign Types</a></h3><div class="sidebar-links"><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D">[T]</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="index.html">palette</a></h2><div id="sidebar-vars" data-name="FromColorMut" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../palette/index.html"><img class="rust-logo" src="../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="index.html">palette</a>::<wbr><a class="trait" href="#">FromColorMut</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/palette/convert/from_into_color_mut.rs.html#101-111" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust trait"><code>pub trait FromColorMut&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.59.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="convert/trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;Self&gt;,&nbsp;</span>{
    fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; <a class="struct" href="convert/struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Temporarily convert colors in place.</p>
<p>It allows colors to be converted without using more additional memory than
what is necessary for the conversion, itself. The conversion will however
have to be reverted at some point, since the memory space is borrowed and
has to be restored to its original format. This is enforced by a scope guard
that does the opposite conversion when it’s dropped.</p>
<p>See also <a href="convert/trait.IntoColorMut.html" title="IntoColorMut"><code>IntoColorMut</code></a> and <a href="convert/trait.FromColorUnclampedMut.html" title="FromColorUnclampedMut"><code>FromColorUnclampedMut</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">palette</span>::{<span class="ident">FromColorMut</span>, <span class="ident">ShiftHueAssign</span>, <span class="ident">Srgb</span>, <span class="ident">Hsv</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rgb</span> <span class="op">=</span> [
    <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsv</span> <span class="op">=</span> <span class="op">&lt;</span>[<span class="ident">Hsv</span>]<span class="op">&gt;</span><span class="ident">::from_color_mut</span>(<span class="kw-2">&amp;mut</span> <span class="ident">rgb</span>);

    <span class="comment">// All of the colors in `rgb` have been converted to `Hsv`:</span>
    <span class="macro">assert_eq!</span>(
        <span class="kw-2">*</span><span class="ident">hsv</span>,
        [
            <span class="ident">Hsv::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            <span class="ident">Hsv::new</span>(<span class="number">120.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            <span class="ident">Hsv::new</span>(<span class="number">240.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        ]
    );

    <span class="ident">hsv</span>.<span class="ident">shift_hue_assign</span>(<span class="number">60.0</span>);

} <span class="comment">// The guard is dropped here and the colors are restored to `Srgb`.</span>

<span class="comment">// Notice how the colors in `rgb` have changed:</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">rgb</span>,
    [
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<p>The scope guard, <a href="convert/struct.FromColorMutGuard.html" title="FromColorMutGuard"><code>FromColorMutGuard</code></a>, has a few extra methods that can
make multiple conversion steps more efficient. One of those is
<a href="convert/struct.FromColorMutGuard.html#method.then_into_color_mut" title="FromColorMutGuard::then_into_color_mut"><code>FromColorMutGuard::then_into_color_mut</code></a>, which works like
<a href="convert/trait.IntoColorMut.html#tymethod.into_color_mut" title="IntoColorMut::into_color_mut"><code>IntoColorMut::into_color_mut</code></a>, but does not add an extra step when
restoring to the original color type. This example will convert <code>Srgb → Hsv → Hsl → Srgb</code> instead of <code>Srgb → Hsv → Hsl → Hsv → Srgb</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">palette</span>::{<span class="ident">FromColorMut</span>, <span class="ident">ShiftHueAssign</span>, <span class="ident">LightenAssign</span>, <span class="ident">Srgb</span>, <span class="ident">Hsv</span>, <span class="ident">Hsl</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rgb</span> <span class="op">=</span> [
    <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsv</span> <span class="op">=</span> <span class="op">&lt;</span>[<span class="ident">Hsv</span>]<span class="op">&gt;</span><span class="ident">::from_color_mut</span>(<span class="kw-2">&amp;mut</span> <span class="ident">rgb</span>);
    <span class="ident">hsv</span>.<span class="ident">shift_hue_assign</span>(<span class="number">60.0</span>);

    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsl</span> <span class="op">=</span> <span class="ident">hsv</span>.<span class="ident">then_into_color_mut</span>::<span class="op">&lt;</span>[<span class="ident">Hsl</span>]<span class="op">&gt;</span>();
    <span class="ident">hsl</span>.<span class="ident">lighten_assign</span>(<span class="number">0.5</span>);

} <span class="comment">// `then_into_color_mut` makes the guard restore directly to `Srgb` here.</span>

<span class="comment">// Notice how the colors in `rgb` have changed:</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">rgb</span>,
    [
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.5</span>),
        <span class="ident">Srgb::new</span>(<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<h2 id="note" class="section-header"><a href="#note">Note</a></h2>
<p>The reused memory space could end up with unexpected values if the
conversion panics or if the scope guard’s <code>drop</code> function doesn’t run. The
default implementations of <code>FromColorMut</code> uses <a href="cast/trait.ArrayCast.html" title="ArrayCast"><code>ArrayCast</code></a>, which is only
implemented for color types that can safely accept and recover from any
value. Other color types will have to provide their own implementations that
can handle this case.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.from_color_mut" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/palette/convert/from_into_color_mut.rs.html#110" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; <a class="struct" href="convert/struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;</h4></div></summary><div class="docblock"><p>Temporarily convert from another color type in place.</p>
<p>This reuses the memory space, and the returned scope guard will restore
the converted colors to their original type when it’s dropped.</p>
</div></details></div><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../src/palette/convert/from_into_color_mut.rs.html#133-152" title="goto source code">[src]</a></div><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="convert/trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">[</a>U<a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">]</a>&gt; for <a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">[</a>T<a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">]</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="convert/trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; + <a class="trait" href="cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.59.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="convert/trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;T&gt; + <a class="trait" href="cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + ?<a class="trait" href="https://doc.rust-lang.org/1.59.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></div></summary><div class="impl-items"><div id="method.from_color_mut" class="method trait-impl has-srclink"><div class="rightside"><a class="srclink" href="../src/palette/convert/from_into_color_mut.rs.html#139-151" title="goto source code">[src]</a></div><a href="#method.from_color_mut" class="anchor"></a><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(colors: <a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">&amp;mut [U]</a>) -&gt; <a class="struct" href="convert/struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, <a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">[</a>U<a class="primitive" href="https://doc.rust-lang.org/1.59.0/std/primitive.slice.html">]</a>&gt;</h4></div></div></details><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><div id="impl-FromColorMut%3CU%3E" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../src/palette/convert/from_into_color_mut.rs.html#113-131" title="goto source code">[src]</a></div><a href="#impl-FromColorMut%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="convert/trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="convert/trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;U&gt; + <a class="trait" href="cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + <a class="trait" href="https://doc.rust-lang.org/1.59.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="convert/trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;T&gt; + <a class="trait" href="cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.59.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h3></div></div><script type="text/javascript" src="../implementors/palette/trait.FromColorMut.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="palette" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>