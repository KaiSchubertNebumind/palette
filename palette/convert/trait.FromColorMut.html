<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Temporarily convert colors in place."><meta name="keywords" content="rust, rustlang, rust-lang, FromColorMut"><title>FromColorMut in palette::convert - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../palette/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../palette/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">FromColorMut</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.from_color_mut">from_color_mut</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul><li><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D">[T]</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In palette::convert</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../palette/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Trait <a href="../index.html">palette</a>::<wbr><a href="index.html">convert</a>::<wbr><a class="trait" href="#">FromColorMut</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/palette/convert/from_into_color_mut.rs.html#101-111">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait FromColorMut&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.64.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> + <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;Self&gt;,&nbsp;</span>{
    fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Temporarily convert colors in place.</p>
<p>It allows colors to be converted without using more additional memory than
what is necessary for the conversion, itself. The conversion will however
have to be reverted at some point, since the memory space is borrowed and
has to be restored to its original format. This is enforced by a scope guard
that does the opposite conversion when it’s dropped.</p>
<p>See also <a href="trait.IntoColorMut.html" title="IntoColorMut"><code>IntoColorMut</code></a> and <a href="trait.FromColorUnclampedMut.html" title="FromColorUnclampedMut"><code>FromColorUnclampedMut</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">palette</span>::{<span class="ident">FromColorMut</span>, <span class="ident">ShiftHueAssign</span>, <span class="ident">Srgb</span>, <span class="ident">Hsv</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rgb</span> <span class="op">=</span> [
    <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsv</span> <span class="op">=</span> <span class="op">&lt;</span>[<span class="ident">Hsv</span>]<span class="op">&gt;</span><span class="ident">::from_color_mut</span>(<span class="kw-2">&amp;mut</span> <span class="ident">rgb</span>);

    <span class="comment">// All of the colors in `rgb` have been converted to `Hsv`:</span>
    <span class="macro">assert_eq!</span>(
        <span class="kw-2">*</span><span class="ident">hsv</span>,
        [
            <span class="ident">Hsv::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            <span class="ident">Hsv::new</span>(<span class="number">120.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
            <span class="ident">Hsv::new</span>(<span class="number">240.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        ]
    );

    <span class="ident">hsv</span>.<span class="ident">shift_hue_assign</span>(<span class="number">60.0</span>);

} <span class="comment">// The guard is dropped here and the colors are restored to `Srgb`.</span>

<span class="comment">// Notice how the colors in `rgb` have changed:</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">rgb</span>,
    [
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<p>The scope guard, <a href="struct.FromColorMutGuard.html" title="FromColorMutGuard"><code>FromColorMutGuard</code></a>, has a few extra methods that can
make multiple conversion steps more efficient. One of those is
<a href="struct.FromColorMutGuard.html#method.then_into_color_mut" title="FromColorMutGuard::then_into_color_mut"><code>FromColorMutGuard::then_into_color_mut</code></a>, which works like
<a href="trait.IntoColorMut.html#tymethod.into_color_mut" title="IntoColorMut::into_color_mut"><code>IntoColorMut::into_color_mut</code></a>, but does not add an extra step when
restoring to the original color type. This example will convert <code>Srgb → Hsv → Hsl → Srgb</code> instead of <code>Srgb → Hsv → Hsl → Hsv → Srgb</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">palette</span>::{<span class="ident">FromColorMut</span>, <span class="ident">ShiftHueAssign</span>, <span class="ident">LightenAssign</span>, <span class="ident">Srgb</span>, <span class="ident">Hsv</span>, <span class="ident">Hsl</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rgb</span> <span class="op">=</span> [
    <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>),
    <span class="ident">Srgb::new</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>),
];

{
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsv</span> <span class="op">=</span> <span class="op">&lt;</span>[<span class="ident">Hsv</span>]<span class="op">&gt;</span><span class="ident">::from_color_mut</span>(<span class="kw-2">&amp;mut</span> <span class="ident">rgb</span>);
    <span class="ident">hsv</span>.<span class="ident">shift_hue_assign</span>(<span class="number">60.0</span>);

    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hsl</span> <span class="op">=</span> <span class="ident">hsv</span>.<span class="ident">then_into_color_mut</span>::<span class="op">&lt;</span>[<span class="ident">Hsl</span>]<span class="op">&gt;</span>();
    <span class="ident">hsl</span>.<span class="ident">lighten_assign</span>(<span class="number">0.5</span>);

} <span class="comment">// `then_into_color_mut` makes the guard restore directly to `Srgb` here.</span>

<span class="comment">// Notice how the colors in `rgb` have changed:</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">rgb</span>,
    [
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.5</span>),
        <span class="ident">Srgb::new</span>(<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.0</span>),
        <span class="ident">Srgb::new</span>(<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">1.0</span>),
    ]
);</code></pre></div>
<h2 id="note"><a href="#note">Note</a></h2>
<p>The reused memory space could end up with unexpected values if the
conversion panics or if the scope guard’s <code>drop</code> function doesn’t run. The
default implementations of <code>FromColorMut</code> uses <a href="../cast/trait.ArrayCast.html" title="ArrayCast"><code>ArrayCast</code></a>, which is only
implemented for color types that can safely accept and recover from any
value. Other color types will have to provide their own implementations that
can handle this case.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.from_color_mut" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/palette/convert/from_into_color_mut.rs.html#110">source</a></div><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(color: <a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, T&gt;</h4></div></summary><div class="docblock"><p>Temporarily convert from another color type in place.</p>
<p>This reuses the memory space, and the returned scope guard will restore
the converted colors to their original type when it’s dropped.</p>
</div></details></div><h2 id="foreign-impls" class="small-section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/palette/convert/from_into_color_mut.rs.html#133-152">source</a></span><a href="#impl-FromColorMut%3C%5BU%5D%3E-for-%5BT%5D" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.slice.html">[U]</a>&gt; for <a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.slice.html">[T]</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + ?<a class="trait" href="https://doc.rust-lang.org/1.64.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + ?<a class="trait" href="https://doc.rust-lang.org/1.64.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><section id="method.from_color_mut" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/palette/convert/from_into_color_mut.rs.html#139-151">source</a></span><a href="#method.from_color_mut" class="anchor"></a><h4 class="code-header">fn <a href="#tymethod.from_color_mut" class="fnname">from_color_mut</a>(colors: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.slice.html">[U]</a>) -&gt; <a class="struct" href="struct.FromColorMutGuard.html" title="struct palette::convert::FromColorMutGuard">FromColorMutGuard</a>&lt;'_, Self, <a class="primitive" href="https://doc.rust-lang.org/1.64.0/std/primitive.slice.html">[U]</a>&gt;</h4></section></div></details><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><section id="impl-FromColorMut%3CU%3E-for-T" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../../src/palette/convert/from_into_color_mut.rs.html#113-131">source</a></span><a href="#impl-FromColorMut%3CU%3E-for-T" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="trait.FromColorMut.html" title="trait palette::convert::FromColorMut">FromColorMut</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;U&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a> + <a class="trait" href="https://doc.rust-lang.org/1.64.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="trait.FromColor.html" title="trait palette::convert::FromColor">FromColor</a>&lt;T&gt; + <a class="trait" href="../cast/trait.ArrayCast.html" title="trait palette::cast::ArrayCast">ArrayCast</a>&lt;Array = T::<a class="associatedtype" href="../cast/trait.ArrayCast.html#associatedtype.Array" title="type palette::cast::ArrayCast::Array">Array</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.64.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h3></section></div><script type="text/javascript" src="../../implementors/palette/convert/from_into_color_mut/trait.FromColorMut.js" data-ignore-extern-crates="std" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="palette" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>